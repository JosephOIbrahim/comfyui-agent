# ComfyUI Agent â€” Response Design System

> **For:** Claude Code agent teams building ComfyUI co-pilot interfaces
> **Principle:** The agent speaks ComfyUI's visual language. Every response should feel like it was designed by Pentagram as a native panel, not generated by an LLM.

---

## 1. Core Philosophy

**The artist doesn't want to read. They want to glance.**

Every response must pass the **3-Second Test**: Can the artist understand what happened, what matters, and what to do next within 3 seconds of looking at the panel?

Three rules, never broken:

1. **Summary-first.** The first thing visible answers "what is this" in one line.
2. **Progressive disclosure.** Show the minimum. Let them drill. Collapsed by default.
3. **Native vocabulary.** Use ComfyUI's own colors, terms, and spatial patterns. No emoji. No markdown headers. No bullet walls.

---

## 2. Brand & Color System

### 2.1 Brand Colors

```
BRAND PRIMARY    #00BB81   Jade green â€” accent, interactive, "ready" state
BRAND DIM        #00BB8133 Low-opacity brand for subtle backgrounds
BRAND SUBTLE     #00BB8118 Ultra-low-opacity for section highlights
DARK             #020410   Black Pearl â€” deepest background
```

### 2.2 Surface Hierarchy

Build depth through layered surfaces, not borders or shadows.

```
canvas           #0d0f14   Page / app background
panel            #141620   Panel container
card             #1a1d2a   Card within panel
card-hover       #1e2133   Hover state
elevated         #222538   Popovers, tooltips
input            #12141e   Input fields
```

### 2.3 Text Hierarchy

Four levels. Never more. If you need a fifth, you've over-structured.

```
primary          #e8e9ed   Titles, key values, names
secondary        #9a9caa   Descriptions, body text
muted            #5c5e6e   Labels, timestamps, meta
accent           #c0c2ce   Emphasis within body text
brand-text       #00BB81   Interactive labels, status
```

### 2.4 Node Slot Colors (Official ComfyUI Dark Theme)

These are the artist's existing color vocabulary. Use them semantically.

```
CLIP             #FFD500   Text encoding
CLIP_VISION      #A8DADC   Vision encoding
CONDITIONING     #FFA931   Prompt conditioning
CONTROL_NET      #6EE7B7   ControlNet
IMAGE            #64B5F6   Image data
LATENT           #FF9CF9   Latent space
MASK             #81C784   Masks
MODEL            #B39DDB   Model/checkpoint
STYLE_MODEL      #C2FFAE   Style transfer
VAE              #FF6E6E   VAE encode/decode
NOISE            #B0B0B0   Noise/randomness
GUIDER           #66FFFF   Guidance/CFG
SAMPLER          #ECB4B4   Sampling
SIGMAS           #CDFFCD   Noise schedule
```

### 2.5 Semantic Mapping

Map node function â†’ slot color. When displaying a node or concept, use the color of its data type, not an arbitrary palette.

```
"loaded a model"        â†’ MODEL (#B39DDB)
"encoded your prompt"   â†’ CLIP (#FFD500) or CONDITIONING (#FFA931)
"sampling"              â†’ SAMPLER (#ECB4B4)
"decoded latents"       â†’ VAE (#FF6E6E)
"final image/video"     â†’ IMAGE (#64B5F6)
"guidance settings"     â†’ GUIDER (#66FFFF)
"noise schedule"        â†’ SIGMAS (#CDFFCD)
```

---

## 3. Typography

### 3.1 Font Stack

```
sans    "Inter", "SF Pro Display", system-ui, -apple-system, sans-serif
mono    "JetBrains Mono", "Fira Code", "SF Mono", "Cascadia Code", monospace
```

### 3.2 Type Scale

```
Panel title          16px  sans  600  -0.02em tracking
Section header       12px  sans  500   0.01em
Body text            12px  sans  400   normal
Label (uppercase)    10px  mono  400   0.06-0.08em  uppercase
Tag / code           11px  mono  400   0.01em
Detail value         10.5px mono 400   0.01em
Stat number          14px  mono  600   normal
```

### 3.3 Rules

- **Mono** for: node names, values, counts, code, tags, status labels
- **Sans** for: descriptions, section titles, body text, button labels
- **Never mix** in the same line. A line is mono or sans, not both.
- Exception: A sans-serif label followed by a mono value on the same row (detail rows)

---

## 4. Spacing System

Breathing room is content. Cramped panels feel like error messages.

### 4.1 Base Unit: 4px

```
Micro gap         4px    Between dot and label
Small gap         6px    Between tags in a row
Medium gap        8-10px Between items in a list
Section padding   14-16px Horizontal panel padding
Section gap       12px   Between content blocks within a section
Header padding    16px top, 14px bottom
Footer padding    10px vertical
```

### 4.2 Vertical Rhythm

Every section separator is a 1px line at `border-subtle` opacity. No heavy borders. No double-lines. The separation comes from background color shifts and spacing, not from drawn lines.

```
Between sections     1px solid #1f2230 (border-subtle)
Within sections      12px gap (no line)
After section title  6-8px before content
```

---

## 5. Component Library

### 5.1 Panel Header (always visible)

This is the only thing the artist MUST read. Everything else is optional.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ workflow Â· analysis            [video gen]   â”‚  â† label (mono, muted, uppercase) + type badge
â”‚                                             â”‚
â”‚ LTXV Video â€” Tiled + Nemotron               â”‚  â† title (sans, 16px, 600)
â”‚                                             â”‚
â”‚ Dual-path video generation with             â”‚  â† summary (sans, 12px, secondary)
â”‚ deterministic optimization. Tiled           â”‚     MAX 2 sentences. This IS the answer.
â”‚ sampling enables high-res beyond VRAM.      â”‚
â”‚                                             â”‚
â”‚ ~15 nodes    2 paths    video output        â”‚  â† stat bar (mono numbers + sans labels)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Rules:**
- Type badge uses brand color background at 18% opacity
- Summary is 1-2 sentences. If it takes 3, you're over-explaining.
- Stat bar: max 3-4 stats. Number in mono (14px, 600), label in sans (10px, muted)

### 5.2 Collapsible Section

Default state: **collapsed**. Only open "Signal Flow" and "Capabilities" by default.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â— Models & Loaders                     3  â–¸ â”‚  â† dot (slot color) + title + count + chevron
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   [CheckpointLoader] [CLIPLoader] [Nem..]   â”‚  â† slot tags (colored by type)
â”‚                                             â”‚
â”‚   Optimization Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· Determ.   â”‚  â† detail rows (label + dots + value)
â”‚   VAE noise Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· Configured â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Rules:**
- Section dot color = primary slot color for that section
- Chevron rotates 90Â° on open (CSS transition, 150ms)
- Open sections get a subtle background tint: `${slotColor}06`
- Count badge is mono, muted, right-aligned

### 5.3 Slot Tag

A node or concept, displayed as a colored chip.

```
â— CLIPTextEncode Ã—2
```

- Dot (slot color, 5px, with glow shadow at 55% opacity)
- Label (mono, 11px, slot color text)
- Background: slot color at 12% opacity
- Border: slot color at 25% opacity
- Border-radius: 3px
- Padding: 2px 8px 2px 6px

### 5.4 Flow Chain

Shows signal path through nodes. This replaces bullet-point descriptions of pipelines.

```
Checkpoint â†’ CLIP â†’ BaseSampler â†’ VAEDecode â†’ Combine
```

- Each node name in mono, 11px, colored by its slot type
- Node has a subtle background tint: `${color}0a`
- Arrow is an SVG path, muted color, 16px wide
- Wrap allowed (flex-wrap) â€” long chains break to next line gracefully
- Path label prefix (e.g., "base path") in mono, 10px, muted, uppercase

### 5.5 Detail Row

Key-value pair with dotted leader. For specifications, parameters, metadata.

```
Optimization Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· Deterministic
CFG Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· Dynamic scaling
```

- Label: sans, 11px, muted, left-aligned
- Leader: dotted bottom-border on a flex-expanded div
- Value: mono, 10.5px, secondary, right-aligned
- Padding: 4px vertical per row

### 5.6 Capability Row

A feature with a brief explanation. Reads like a spec sheet.

```
â— Deterministic â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Same seed â†’ same output
â— High-res tiling â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Beyond VRAM limits
```

- Dot (brand color or relevant slot color, 4px)
- Label: sans, 11px, accent, 500 weight
- Separator: 1px line, border-subtle
- Description: sans, 10.5px, muted

### 5.7 Action Footer

What the artist can do next. Always at the bottom.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ready                    [Modify]  [â–Š Run]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- Status label: mono, 10px, muted
- Secondary button: transparent bg, border, secondary text
- Primary button: brand green bg, dark text
- Border-radius: 4px, padding: 5px 14px

---

## 6. Response Templates

### 6.1 Workflow Analysis (inspect/understand)

```
HEADER
  label: "workflow Â· analysis"
  badge: workflow type (e.g., "video gen", "img2img", "inpainting")
  title: Model name + key technique
  summary: 1-2 sentences. What it does and what makes it notable.
  stats: node count, path count, output type

SECTIONS (collapsed by default)
  Signal Flow (open): flow chains showing data paths
  [One section per node category]: slot tags + detail rows
  Capabilities (open): capability rows

FOOTER
  status + action buttons
```

### 6.2 Modification Confirmation (pilot/modify)

```
HEADER
  label: "workflow Â· modified"
  badge: change type (e.g., "param", "node swap", "restructure")
  title: What changed, in plain English
  summary: "Changed X from A to B" â€” concrete, verifiable

SECTIONS
  Changes (open): before â†’ after detail rows
  Affected nodes: slot tags of touched nodes
  Unchanged: brief note of what wasn't affected

FOOTER
  status: "modified Â· not yet executed" + [Undo] [Run]
```

### 6.3 Execution Result (execute/verify)

```
HEADER
  label: "execution Â· complete"
  badge: "success" (green) or "failed" (VAE red)
  title: What was produced
  summary: Generation time, output dimensions, seed

SECTIONS
  Output: image/video preview if available
  Parameters used: detail rows of key settings
  Quality notes: any observations from vision analysis

FOOTER
  status + [Iterate] [Save] [New prompt]
```

### 6.4 Discovery Results (search/discover)

```
HEADER
  label: "discovery Â· models" or "discovery Â· nodes"
  badge: result count
  title: What was searched
  summary: Top result + why it's relevant

SECTIONS
  Results: one sub-section per result with name, description, compatibility
  Related: cross-references to installed vs available

FOOTER
  status + [Install] [Details]
```

### 6.5 Error / Issue

```
HEADER
  label: "issue Â· detected"
  badge: severity ("warning" in CONDITIONING orange, "error" in VAE red)
  title: What went wrong, plain English
  summary: Most likely cause in one sentence

SECTIONS
  Details (open): the technical specifics
  Suggestions: numbered recovery steps (max 3)
  Context: what was happening when it failed

FOOTER
  status + [Retry] [Skip]
```

---

## 7. Response Formatting Rules

These apply to ALL agent output, not just panels.

### 7.1 Text Responses (non-panel conversational replies)

When the agent responds in plain text (not a structured panel), follow these rules:

**Spacing:**
- One blank line between paragraphs. Always.
- Two blank lines before a new topic/section.
- Never more than 3 sentences in a row without a visual break.

**Structure:**
- Lead with the answer. First sentence = what the artist needs to know.
- Supporting detail follows. Never bury the answer.
- If listing things, use inline lists ("X, Y, and Z") not bullet points â€” unless there are 5+ items or each needs explanation.

**Tone:**
- Terse over verbose. "Changed steps from 20 to 30" not "I've gone ahead and modified the number of sampling steps from the previous value of 20 to a new value of 30."
- Technical over casual. Artists respect precision. Don't dumb it down.
- Active voice. "Loaded SDXL checkpoint" not "The SDXL checkpoint has been loaded."
- No filler phrases: "I'd be happy to", "Let me help you with", "Great question!"

**Node references in text:**
- Always use the exact node class name, not a paraphrase
- Format in monospace/code style when the rendering supports it
- Color the reference by slot type when possible

### 7.2 Length Guidelines

```
Quick confirmation      1-2 sentences, no panel
Parameter change        Panel header only (no sections needed)
Workflow analysis       Full panel with sections
Error diagnosis         Panel with details + suggestions open
Discovery results       Panel with results, max 5 shown
```

### 7.3 The "Don't Make Me Read" Principle

Before sending any response, apply this filter:

1. Can I cut this in half? â†’ Do it.
2. Is anything repeated? â†’ Remove it.
3. Is the first sentence the answer? â†’ If not, restructure.
4. Would a section heading serve the artist better than prose? â†’ Use the panel.
5. Am I explaining something the artist already knows? â†’ Remove it.

---

## 8. Anti-Patterns (Never Do This)

| Pattern | Why It Fails | Do Instead |
|---------|-------------|------------|
| Emoji as headers (ğŸ¯ ğŸ“ ğŸ§ ) | Childish, not scannable, not native | Colored dots using slot colors |
| Markdown bullet walls | Equal visual weight, no hierarchy | Collapsible sections with slot tags |
| "What This Workflow Excels At" | Sales copy, not a tool | "Capabilities" spec sheet |
| Bold **every** node name | Visual noise, nothing stands out | Colored mono-font tags |
| "Would you like me to..." at the end | Passive, wastes space | Action buttons in footer |
| Restating the question | Artist knows what they asked | Jump to the answer |
| H2/H3 markdown headers | Flat hierarchy, all equally loud | Progressive disclosure with collapse |
| "This is a sophisticated workflow" | Subjective filler | Concrete: "Dual-path with tiling" |
| Long paragraphs of explanation | Nobody reads paragraph 3 | Summary sentence + collapsible detail |
| Numbered lists for features | Implies sequence where none exists | Capability rows or inline text |

---

## 9. Implementation Notes

### 9.1 For HTML/React Panel Rendering

- All colors as CSS custom properties for theme switching
- Transitions: 150ms ease for collapse/expand, hover states
- Scrollbar: 3px width, track transparent, thumb at border color
- Font loading: Import Inter + JetBrains Mono from Google Fonts
- Max panel width: 500px (sidebar constraint)
- Overflow: scrollY with thin custom scrollbar

### 9.2 For Plain Text Fallback

When the agent can't render a panel (CLI, plain text contexts):

```
â”€ LTXV Video â€” Tiled + Nemotron â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  video gen Â· ~15 nodes Â· 2 paths

  Dual-path video generation with deterministic
  optimization. Tiled sampling for high-res.

  Flow: Checkpoint â†’ CLIP â†’ Sampler â†’ VAE â†’ Combine
  Tiled: TiledSampler â†’ VAEDecode â†’ Resize â†’ Combine
  Merge: AdaIN Blend

  âœ“ Deterministic    âœ“ High-res tiling
  âœ“ Dual-path blend  âœ“ STG guidance

  [Modify]  [Run]
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

Use box-drawing characters, not markdown. Align with monospace assumptions. Keep the same information hierarchy: title â†’ summary â†’ flow â†’ capabilities â†’ actions.

### 9.3 For Markdown Contexts (where panels aren't possible)

When stuck in markdown-only rendering:

```markdown
**LTXV Video â€” Tiled + Nemotron** Â· video gen

Dual-path video generation with deterministic optimization.
Tiled sampling enables high-res output beyond VRAM limits.

`Checkpoint â†’ CLIP â†’ BaseSampler â†’ VAEDecode â†’ Combine`
`TiledSampler â†’ VAEDecodeTiled â†’ Resize â†’ Combine`

Deterministic Â· High-res tiling Â· Dual-path blend Â· STG guidance
```

Minimal markdown. No H2/H3. No bullet lists. Bold only the title. Code blocks only for flow chains. Inline list for capabilities. This is the least-bad version â€” always prefer panel rendering when available.

---

## 10. Design Checklist

Before shipping any response, verify:

- [ ] First visible line answers "what is this"
- [ ] Summary is â‰¤ 2 sentences
- [ ] No emoji anywhere
- [ ] Node references use slot colors
- [ ] Sections are collapsed by default (except flow + capabilities)
- [ ] No markdown headers (H2, H3, etc.)
- [ ] No bullet-point walls
- [ ] Action buttons present (what can the artist do next?)
- [ ] Response passes the 3-Second Test
- [ ] Text is terse, technical, active voice
- [ ] Nothing is restated or repeated
- [ ] Whitespace / spacing creates visual breathing room

---

*Design system v1.0 â€” ComfyUI Agent Panel*
*Colors sourced from docs.comfy.org/interface/appearance (dark theme)*
*Brand colors from ComfyUI identity: #00BB81 / #020410 / #FAFAFA*
